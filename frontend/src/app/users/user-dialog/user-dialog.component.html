<h2 mat-dialog-title>{{ isEditMode ? 'Edit User' : 'Add New User' }}</h2>

<mat-dialog-content>
    <form [formGroup]="form">
        <div class="row">
            <div class="col-lg-12">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" placeholder="Enter full name" required>
                    <mat-error *ngIf="form.get('name')?.hasError('required')">
                        Name is required
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-lg-12">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Email Address</mat-label>
                    <input matInput formControlName="email" placeholder="Enter email address" required>
                    <mat-error *ngIf="form.get('email')?.hasError('required')">
                        Email is required
                    </mat-error>
                    <mat-error *ngIf="form.get('email')?.hasError('email')">
                        Please enter a valid email
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-lg-12">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Password</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
                        placeholder="Enter password (leave blank to keep unchanged if editing)">
                    <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword"
                        [disabled]="isSocialUser">
                        <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-hint *ngIf="isSocialUser" class="text-warning">
                        Password is managed by Social Login provider.
                    </mat-hint>
                </mat-form-field>
            </div>

            <div class="col-lg-6">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Role</mat-label>
                    <mat-select formControlName="role">
                        <mat-option *ngFor="let role of roles" [value]="role">
                            {{ role | titlecase }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.get('role')?.hasError('required')">
                        Role is required
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- <div class="col-lg-6">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>College</mat-label>
                    <mat-select formControlName="college">
                        <mat-option [value]="''">-- None --</mat-option>
                        <mat-option *ngFor="let college of colleges" [value]="college._id">
                            {{ college.college_name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div> -->

            <div class="col-lg-6">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Assigned Groups (Colleges)</mat-label>
                    <mat-select formControlName="group_ids" multiple>
                        <mat-option *ngFor="let college of colleges" [value]="college._id">
                            {{ college.college_name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-flat-button color="primary" type="button" (click)="onSubmit()">
        {{ isEditMode ? 'Update' : 'Create' }}
    </button>
</mat-dialog-actions>